"use strict";(self["webpackChunktest_proj"]=self["webpackChunktest_proj"]||[]).push([[685],{1581:function(s,e,t){t.r(e),t.d(e,{default:function(){return c}});var r=function(){var s=this,e=s._self._c;return e("div",{staticClass:"login"},[e("p",[s._v("Enter your username and password to login")]),e("div",[e("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),s.submit.apply(null,arguments)}}},[e("div",[e("label",{attrs:{for:"username"}},[s._v("User name:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.login,expression:"form.login"}],attrs:{type:"text",name:"username",required:""},domProps:{value:s.form.login},on:{input:function(e){e.target.composing||s.$set(s.form,"login",e.target.value)}}})]),e("div",{staticClass:"pass-box"},[e("label",{attrs:{for:"password"}},[s._v("Password:")]),s.showPassword?s._e():e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.password,expression:"form.password"}],staticClass:"pass-input",attrs:{type:"password",name:"password",required:""},domProps:{value:s.form.password},on:{input:function(e){e.target.composing||s.$set(s.form,"password",e.target.value)}}}),s.showPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.password,expression:"form.password"}],staticClass:"pass-input",attrs:{type:"text",name:"password",required:""},domProps:{value:s.form.password},on:{input:function(e){e.target.composing||s.$set(s.form,"password",e.target.value)}}}):s._e(),e("button",{staticClass:"pass-visible-btn"},[s.showPassword?s._e():e("img",{staticClass:"view-icon",attrs:{src:t(8333),alt:"img"},on:{click:function(e){return s.toggleShow(e)}}}),s.showPassword?e("img",{staticClass:"view-icon",attrs:{src:t(469),alt:"img"},on:{click:function(e){return s.toggleShow(e)}}}):s._e()])]),e("button",{staticClass:"submit-button",attrs:{type:"submit"}},[s._v("Confirm")])]),s.showError?e("p",{attrs:{id:"error"}},[s._v(s._s(s.errorMessage))]):s._e(),e("div",{staticClass:"have-account"},[e("p",[s._v("Not registered yet?")]),e("router-link",{attrs:{to:"/register"}},[e("button",[s._v("Go to registration!")])])],1)])])},o=[],a=(t(7658),t(563)),n={name:"LoginPage",components:{},data(){return{form:{login:"",password:""},errorMessage:"",showError:!1,showPassword:!1}},methods:{toggleShow(s){s.preventDefault(),this.showPassword=!this.showPassword},async submit(){try{const s=await a.g.userLogin(this.form);s.success&&this.$router.push({name:"home"})}catch(s){console.error(s),this.errorMessage=s.message,this.showError=!0}}}},i=n,l=t(1001),u=(0,l.Z)(i,r,o,!1,null,"81955674",null),c=u.exports},1869:function(s,e,t){t.r(e),t.d(e,{default:function(){return c}});var r=function(){var s=this,e=s._self._c;return e("div",{staticClass:"register"},[e("p",[s._v("You need to register to continue")]),e("div",[e("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),s.submit.apply(null,arguments)}}},[e("div",[e("label",{attrs:{for:"username"}},[s._v("User name:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.login,expression:"form.login"}],attrs:{type:"text",name:"username"},domProps:{value:s.form.login},on:{input:function(e){e.target.composing||s.$set(s.form,"login",e.target.value)}}})]),e("div",{staticClass:"pass-box"},[e("label",{attrs:{for:"password"}},[s._v("Password:")]),s.showPassword?s._e():e("input",{directives:[{name:"model",rawName:"v-model",value:s.inpPass,expression:"inpPass"}],staticClass:"pass-input",attrs:{type:"password",name:"password",required:""},domProps:{value:s.inpPass},on:{input:function(e){e.target.composing||(s.inpPass=e.target.value)}}}),s.showPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:s.inpPass,expression:"inpPass"}],staticClass:"pass-input",attrs:{type:"text",name:"password",required:""},domProps:{value:s.inpPass},on:{input:function(e){e.target.composing||(s.inpPass=e.target.value)}}}):s._e(),e("button",{staticClass:"pass-visible-btn"},[s.showPassword?s._e():e("img",{staticClass:"view-icon",attrs:{src:t(8333),alt:"img"},on:{click:function(e){return s.toggleShow(e)}}}),s.showPassword?e("img",{staticClass:"view-icon",attrs:{src:t(469),alt:"img"},on:{click:function(e){return s.toggleShow(e)}}}):s._e()])]),e("div",{staticClass:"pass-box"},[e("label",{attrs:{for:"password"}},[s._v("Repeat the password:")]),s.showPasswordRepeat?s._e():e("input",{directives:[{name:"model",rawName:"v-model",value:s.inpPassReepat,expression:"inpPassReepat"}],staticClass:"pass-input",attrs:{type:"password",name:"password",required:""},domProps:{value:s.inpPassReepat},on:{input:function(e){e.target.composing||(s.inpPassReepat=e.target.value)}}}),s.showPasswordRepeat?e("input",{directives:[{name:"model",rawName:"v-model",value:s.inpPassReepat,expression:"inpPassReepat"}],staticClass:"pass-input",attrs:{type:"text",name:"password",required:""},domProps:{value:s.inpPassReepat},on:{input:function(e){e.target.composing||(s.inpPassReepat=e.target.value)}}}):s._e(),e("button",{staticClass:"pass-visible-btn"},[s.showPasswordRepeat?s._e():e("img",{staticClass:"view-icon",attrs:{src:t(8333),alt:"img"},on:{click:function(e){return s.toggleShowRepeat(e)}}}),s.showPasswordRepeat?e("img",{staticClass:"view-icon",attrs:{src:t(469),alt:"img"},on:{click:function(e){return s.toggleShowRepeat(e)}}}):s._e()])]),e("div",[e("label",{attrs:{for:"email"}},[s._v("Email:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.form.email,expression:"form.email"}],attrs:{type:"email",name:"email"},domProps:{value:s.form.email},on:{input:function(e){e.target.composing||s.$set(s.form,"email",e.target.value)}}})]),e("button",{staticClass:"submit-button",attrs:{type:"submit"}},[s._v("Confirm")])]),s.showError?e("p",{attrs:{id:"error"}},[s._v(s._s(s.errorMessage))]):s._e(),e("div",{staticClass:"have-account"},[e("p",[s._v("Have an account?")]),e("router-link",{attrs:{to:"/"}},[e("button",[s._v("Login to personal account")])])],1)])])},o=[],a=(t(7658),t(563)),n={name:"RegisterPage",data(){return{form:{login:"",password:"",email:""},inpPass:"",inpPassReepat:"",errorMessage:"",showError:!1,showPassword:!1,showPasswordRepeat:!1,showModal:!1}},watch:{inpPassReepat(){this.inpPass==this.inpPassReepat?(this.form.password=this.inpPassReepat,this.errorMessage="",this.showError=!1):(this.errorMessage="passwords do not match",this.showError=!0)},inpPass(){this.inpPass==this.inpPassReepat?(this.form.password=this.inpPassReepat,this.errorMessage="",this.showError=!1):(this.errorMessage="passwords do not match",this.showError=!0)}},methods:{toggleShow(s){s.preventDefault(),this.showPassword=!this.showPassword},toggleShowRepeat(s){s.preventDefault(),this.showPasswordRepeat=!this.showPasswordRepeat},async submit(){try{const s=await a.g.createUser(this.form);s.success&&this.$router.push({name:"login"})}catch(s){console.error(s),this.errorMessage=s.message,this.showError=!0}}}},i=n,l=t(1001),u=(0,l.Z)(i,r,o,!1,null,"10c54cc8",null),c=u.exports},563:function(s,e,t){t.d(e,{g:function(){return a}});const r=async s=>new Promise(((e,t)=>{const r="auth",o=2;let a;function n(){const r=a.transaction(["users-list"],"readonly"),o=r.objectStore("users-list"),n=o.getAll();n.onsuccess=t=>{const r=t.target.result;if(!r)return e({success:!1,message:"Data not found in IndexedDB."});const o=r.find((e=>e.login===s.login));return console.log(o),console.log(s.password),o?o.password!==s.password?e({success:!1,message:"Invalid password"}):e({success:!0,message:"logined",user:o}):e({success:!1,message:"user with that name does not exist"})},n.onerror=s=>{t({success:!1,message:"Error getting data from IndexedDB",error:s.target.error})}}const i=window.indexedDB.open(r,o);i.onsuccess=s=>{a=i.result,console.log("IndexedDB connection opened successfully!"),n()},i.onerror=s=>{t({success:!1,message:"Error opening IndexedDB:",error:s.target.error})}})),o=async s=>new Promise(((e,t)=>{const r="auth",o=2;let a;const n=window.indexedDB.open(r,o);function i(s){const r=a.transaction(["users-list"],"readwrite"),o=r.objectStore("users-list"),n=o.add(s);n.onsuccess=s=>e({success:!0,message:"Data added to IndexedDB successfully!",result:n.result}),n.onerror=s=>t({success:!1,message:"Error adding data to IndexedDB. Maybe the username or email address is already taken",error:s.target.error})}n.onsuccess=e=>{a=n.result,console.log("IndexedDB connection opened successfully!"),i(s)},n.onerror=s=>(console.error("Error opening IndexedDB:",s.target.error),t({success:!1,message:"Error opening IndexedDB",error:s.target.error})),n.onupgradeneeded=s=>{a=s.target.result,a.onerror=s=>t({success:!1,message:"Error loading database.",error:s.target.error});const e=a.createObjectStore("users-list",{keyPath:"id",autoIncrement:!0});e.createIndex("login","login",{unique:!0}),e.createIndex("email","email",{unique:!0}),e.createIndex("password","password",{unique:!1}),console.log("Object store created and upgraded.")}})),a={createUser:o,userLogin:r}},8333:function(s,e,t){s.exports=t.p+"img/view-filled.1e317241.svg"},469:function(s,e,t){s.exports=t.p+"img/view-off-filled.b7ef0c3a.svg"}}]);
//# sourceMappingURL=register.af8fbc7d.js.map